(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();const z=(e,t)=>e===t,_={equals:z};let G=W;const b=1,$=2,X={owned:null,cleanups:null,context:null,owner:null};var h=null;let O=null,ee=null,a=null,f=null,p=null,N=0;function te(e,t){const n=a,i=h,s=e.length===0,o=t===void 0?i:t,l=s?X:{owned:null,cleanups:null,context:o?o.context:null,owner:o},c=s?e:()=>e(()=>U(()=>C(l)));h=l,a=null;try{return x(c,!0)}finally{a=n,h=i}}function j(e,t){t=t?Object.assign({},_,t):_;const n={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},i=s=>(typeof s=="function"&&(s=s(n.value)),Q(n,s));return[K.bind(n),i]}function A(e,t,n){const i=B(e,t,!1,b);y(i)}function ne(e,t,n){G=oe;const i=B(e,t,!1,b);i.user=!0,p?p.push(i):y(i)}function P(e,t,n){n=n?Object.assign({},_,n):_;const i=B(e,t,!0,0);return i.observers=null,i.observerSlots=null,i.comparator=n.equals||void 0,y(i),K.bind(i)}function U(e){if(a===null)return e();const t=a;a=null;try{return e()}finally{a=t}}function K(){if(this.sources&&this.state)if(this.state===b)y(this);else{const e=f;f=null,x(()=>S(this),!1),f=e}if(a){const e=this.observers?this.observers.length:0;a.sources?(a.sources.push(this),a.sourceSlots.push(e)):(a.sources=[this],a.sourceSlots=[e]),this.observers?(this.observers.push(a),this.observerSlots.push(a.sources.length-1)):(this.observers=[a],this.observerSlots=[a.sources.length-1])}return this.value}function Q(e,t,n){let i=e.value;return(!e.comparator||!e.comparator(i,t))&&(e.value=t,e.observers&&e.observers.length&&x(()=>{for(let s=0;s<e.observers.length;s+=1){const o=e.observers[s],l=O&&O.running;l&&O.disposed.has(o),(l?!o.tState:!o.state)&&(o.pure?f.push(o):p.push(o),o.observers&&Y(o)),l||(o.state=b)}if(f.length>1e6)throw f=[],new Error},!1)),t}function y(e){if(!e.fn)return;C(e);const t=N;se(e,e.value,t)}function se(e,t,n){let i;const s=h,o=a;a=h=e;try{i=e.fn(t)}catch(l){return e.pure&&(e.state=b,e.owned&&e.owned.forEach(C),e.owned=null),e.updatedAt=n+1,J(l)}finally{a=o,h=s}(!e.updatedAt||e.updatedAt<=n)&&(e.updatedAt!=null&&"observers"in e?Q(e,i):e.value=i,e.updatedAt=n)}function B(e,t,n,i=b,s){const o={fn:e,state:i,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:h,context:h?h.context:null,pure:n};return h===null||h!==X&&(h.owned?h.owned.push(o):h.owned=[o]),o}function T(e){if(e.state===0)return;if(e.state===$)return S(e);if(e.suspense&&U(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<N);)e.state&&t.push(e);for(let n=t.length-1;n>=0;n--)if(e=t[n],e.state===b)y(e);else if(e.state===$){const i=f;f=null,x(()=>S(e,t[0]),!1),f=i}}function x(e,t){if(f)return e();let n=!1;t||(f=[]),p?n=!0:p=[],N++;try{const i=e();return ie(n),i}catch(i){n||(p=null),f=null,J(i)}}function ie(e){if(f&&(W(f),f=null),e)return;const t=p;p=null,t.length&&x(()=>G(t),!1)}function W(e){for(let t=0;t<e.length;t++)T(e[t])}function oe(e){let t,n=0;for(t=0;t<e.length;t++){const i=e[t];i.user?e[n++]=i:T(i)}for(t=0;t<n;t++)T(e[t])}function S(e,t){e.state=0;for(let n=0;n<e.sources.length;n+=1){const i=e.sources[n];if(i.sources){const s=i.state;s===b?i!==t&&(!i.updatedAt||i.updatedAt<N)&&T(i):s===$&&S(i,t)}}}function Y(e){for(let t=0;t<e.observers.length;t+=1){const n=e.observers[t];n.state||(n.state=$,n.pure?f.push(n):p.push(n),n.observers&&Y(n))}}function C(e){let t;if(e.sources)for(;e.sources.length;){const n=e.sources.pop(),i=e.sourceSlots.pop(),s=n.observers;if(s&&s.length){const o=s.pop(),l=n.observerSlots.pop();i<s.length&&(o.sourceSlots[l]=i,s[i]=o,n.observerSlots[i]=l)}}if(e.tOwned){for(t=e.tOwned.length-1;t>=0;t--)C(e.tOwned[t]);delete e.tOwned}if(e.owned){for(t=e.owned.length-1;t>=0;t--)C(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0}function ce(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function J(e,t=h){throw ce(e)}function D(e,t){return U(()=>e(t||{}))}function le(e,t,n){let i=n.length,s=t.length,o=i,l=0,c=0,r=t[s-1].nextSibling,u=null;for(;l<s||c<o;){if(t[l]===n[c]){l++,c++;continue}for(;t[s-1]===n[o-1];)s--,o--;if(s===l){const d=o<i?c?n[c-1].nextSibling:n[o-c]:r;for(;c<o;)e.insertBefore(n[c++],d)}else if(o===c)for(;l<s;)(!u||!u.has(t[l]))&&t[l].remove(),l++;else if(t[l]===n[o-1]&&n[c]===t[s-1]){const d=t[--s].nextSibling;e.insertBefore(n[c++],t[l++].nextSibling),e.insertBefore(n[--o],d),t[s]=n[o]}else{if(!u){u=new Map;let w=c;for(;w<o;)u.set(n[w],w++)}const d=u.get(t[l]);if(d!=null)if(c<d&&d<o){let w=l,I=1,M;for(;++w<s&&w<o&&!((M=u.get(t[w]))==null||M!==d+I);)I++;if(I>d-c){const Z=t[l];for(;c<d;)e.insertBefore(n[c++],Z)}else e.replaceChild(n[c++],t[l++])}else l++;else t[l++].remove()}}}const F="_$DX_DELEGATE";function re(e,t,n,i={}){let s;return te(o=>{s=o,t===document?e():E(t,e(),t.firstChild?null:void 0,n)},i.owner),()=>{s(),t.textContent=""}}function v(e,t,n){let i;const s=()=>{const l=document.createElement("template");return l.innerHTML=e,l.content.firstChild},o=()=>(i||(i=s())).cloneNode(!0);return o.cloneNode=o,o}function V(e,t=window.document){const n=t[F]||(t[F]=new Set);for(let i=0,s=e.length;i<s;i++){const o=e[i];n.has(o)||(n.add(o),t.addEventListener(o,ue))}}function H(e,t){t==null?e.removeAttribute("class"):e.className=t}function E(e,t,n,i){if(n!==void 0&&!i&&(i=[]),typeof t!="function")return R(e,t,i,n);A(s=>R(e,t(),s,n),i)}function ue(e){let t=e.target;const n=`$$${e.type}`,i=e.target,s=e.currentTarget,o=r=>Object.defineProperty(e,"target",{configurable:!0,value:r}),l=()=>{const r=t[n];if(r&&!t.disabled){const u=t[`${n}Data`];if(u!==void 0?r.call(t,u,e):r.call(t,e),e.cancelBubble)return}return t.host&&typeof t.host!="string"&&!t.host._$host&&t.contains(e.target)&&o(t.host),!0},c=()=>{for(;l()&&(t=t._$host||t.parentNode||t.host););};if(Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return t||document}}),e.composedPath){const r=e.composedPath();o(r[0]);for(let u=0;u<r.length-2&&(t=r[u],!!l());u++){if(t._$host){t=t._$host,c();break}if(t.parentNode===s)break}}else c();o(i)}function R(e,t,n,i,s){for(;typeof n=="function";)n=n();if(t===n)return n;const o=typeof t,l=i!==void 0;if(e=l&&n[0]&&n[0].parentNode||e,o==="string"||o==="number"){if(o==="number"&&(t=t.toString(),t===n))return n;if(l){let c=n[0];c&&c.nodeType===3?c.data!==t&&(c.data=t):c=document.createTextNode(t),n=m(e,n,i,c)}else n!==""&&typeof n=="string"?n=e.firstChild.data=t:n=e.textContent=t}else if(t==null||o==="boolean")n=m(e,n,i);else{if(o==="function")return A(()=>{let c=t();for(;typeof c=="function";)c=c();n=R(e,c,n,i)}),()=>n;if(Array.isArray(t)){const c=[],r=n&&Array.isArray(n);if(L(c,t,n,s))return A(()=>n=R(e,c,n,i,!0)),()=>n;if(c.length===0){if(n=m(e,n,i),l)return n}else r?n.length===0?k(e,c,i):le(e,n,c):(n&&m(e),k(e,c));n=c}else if(t.nodeType){if(Array.isArray(n)){if(l)return n=m(e,n,i,t);m(e,n,null,t)}else n==null||n===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);n=t}}return n}function L(e,t,n,i){let s=!1;for(let o=0,l=t.length;o<l;o++){let c=t[o],r=n&&n[e.length],u;if(!(c==null||c===!0||c===!1))if((u=typeof c)=="object"&&c.nodeType)e.push(c);else if(Array.isArray(c))s=L(e,c,r)||s;else if(u==="function")if(i){for(;typeof c=="function";)c=c();s=L(e,Array.isArray(c)?c:[c],Array.isArray(r)?r:[r])||s}else e.push(c),s=!0;else{const d=String(c);r&&r.nodeType===3&&r.data===d?e.push(r):e.push(document.createTextNode(d))}}return s}function k(e,t,n=null){for(let i=0,s=t.length;i<s;i++)e.insertBefore(t[i],n)}function m(e,t,n,i){if(n===void 0)return e.textContent="";const s=i||document.createTextNode("");if(t.length){let o=!1;for(let l=t.length-1;l>=0;l--){const c=t[l];if(s!==c){const r=c.parentNode===e;!o&&!l?r?e.replaceChild(s,c):e.insertBefore(s,n):r&&c.remove()}else o=!0}}else e.insertBefore(s,n);return[s]}const q="53300001-0023-4bd4-bbd5-a6920e4c5653",ae="53300002-0023-4bd4-bbd5-a6920e4c5653",fe="53300003-0023-4bd4-bbd5-a6920e4c5653",he=3;class de{device=null;get deviceName(){return this.device?.name||null}server=null;service=null;tx_characteristic=null;rx_characteristic=null;get connected(){return this.device&&this.device.gatt?.connected}onConnectionChange=null;onReconnectionChange=null;wantsConnection=!1;get reconnecting(){return this.device&&!this.device.gatt?.connected&&this.enableAutoReconnect}reconnectTimeoutId=void 0;_enableAutoReconnect=!0;get enableAutoReconnect(){return this._enableAutoReconnect}set enableAutoReconnect(t){this._enableAutoReconnect=t,t||(clearTimeout(this.reconnectTimeoutId),this.reconnectTimeoutId=void 0,this.connected||(this.device=null,this.onReconnectionChange&&this.onReconnectionChange(!1)))}constructor(){}async connectPrompt(){try{const t=await navigator.bluetooth.requestDevice({filters:[{services:[q]}]});await this.connect(t)}catch{console.warn("closed connect prompt")}}async connect(t){t&&(this.device=t,this.wantsConnection=!0,this.server=await t.gatt.connect(),console.log("device connected:",t.name),this.onReconnectionChange&&this.onReconnectionChange(!1),this.onConnectionChange&&this.onConnectionChange(!0),this.service=await this.server.getPrimaryService(q),this.tx_characteristic=await this.service.getCharacteristic(ae),this.rx_characteristic=await this.service.getCharacteristic(fe),console.log("service + characteristics obtained"),t.addEventListener("gattserverdisconnected",()=>{console.log("device disconneted"),this.server=null,this.service=null,this.tx_characteristic=null,this.rx_characteristic=null,this.onConnectionChange&&this.onConnectionChange(!1),this.enableAutoReconnect&&this.wantsConnection?(this.onReconnectionChange&&this.onReconnectionChange(!0),this._attemptReconnect()):t=null}))}async _attemptReconnect(){if(!this.connected&&this.device){console.log("reconnect attempt...");try{clearTimeout(this.reconnectTimeoutId),this.reconnectTimeoutId=void 0,await this.connect(this.device)}catch{clearTimeout(this.reconnectTimeoutId),this.reconnectTimeoutId=setTimeout(()=>{console.log("reconnect timeout"),this._attemptReconnect()},1e3*he)}}}disconnect(){this.connected?(this.wantsConnection=!1,this.device.gatt?.disconnect(),this.device=null):(this.wantsConnection=!1,this.device=null,clearTimeout(this.reconnectTimeoutId),this.reconnectTimeoutId=void 0,this.onReconnectionChange&&this.onReconnectionChange(!1))}async sendVibe(t){if(this.tx_characteristic){const i="Vibrate:"+Math.min(20,Math.max(0,t)).toFixed(0)+";",o=new TextEncoder().encode(i);await this.tx_characteristic.writeValue(o)}}}const g=new de;var ge=v('<header class=p-4><div class="container mx-auto flex items-center justify-between"><h1 class="text-3xl font-bold tracking-wider text-white">OSP'),pe=v('<button class="rounded bg-red-500 px-4 py-2 text-white">Disconnect'),be=v("<span class=text-white>"),we=v('<button class="rounded bg-white px-4 py-2 text-blue-500">Connect');const ve=e=>(()=>{var t=ge(),n=t.firstChild;return n.firstChild,E(n,(()=>{var i=P(()=>!!e.connected);return()=>i()?[(()=>{var s=pe();return s.$$click=()=>g.disconnect(),s})(),(()=>{var s=be();return E(s,()=>g.deviceName),s})()]:(()=>{var s=we();return s.$$click=()=>g.connectPrompt(),s})()})(),null),t})();V(["click"]);var me=v('<div class="flex space-x-4"><button>10</button><button>0');const Ce=e=>{const t=n=>{g.sendVibe(n)};return(()=>{var n=me(),i=n.firstChild,s=i.nextSibling;return i.$$click=()=>t(10),s.$$click=()=>t(0),A(o=>{var l=`rounded px-4 py-2 ${e.disabled?"bg-gray-500":"bg-blue-500"} text-white`,c=e.disabled,r=`rounded px-4 py-2 ${e.disabled?"bg-gray-500":"bg-red-500"} text-white`,u=e.disabled;return l!==o.e&&H(i,o.e=l),c!==o.t&&(i.disabled=o.t=c),r!==o.a&&H(s,o.a=r),u!==o.o&&(s.disabled=o.o=u),o},{e:void 0,t:void 0,a:void 0,o:void 0}),n})()};V(["click"]);var ye=v('<div class="px-32 py-8">'),xe=v("<span>Reconnecting... <button>Stop");const _e=()=>{const[e,t]=j(!1),[n,i]=j(!1);return ne(()=>(g.onConnectionChange=s=>t(s),g.onReconnectionChange=s=>i(s),()=>{g.onConnectionChange=null,g.onReconnectionChange=null})),[P((()=>{var s=P(()=>!!n());return()=>s()?(()=>{var o=xe(),l=o.firstChild,c=l.nextSibling;return c.$$click=()=>g.disconnect(),o})():null})()),D(ve,{get connected(){return e()}}),(()=>{var s=ye();return E(s,D(Ce,{get disabled(){return!e()}})),s})()]};V(["click"]);const $e=document.getElementById("root");re(()=>D(_e,{}),$e);
